<!--
  This file (c) Copyright 1998 - 2002 The MITRE Corporation
  
  This file is part of the Galaxy Communicator system. It is licensed
  under the conditions described in the file LICENSE in the root 
  directory of the Galaxy Communicator system.
-->
<!DOCTYPE doctype PUBLIC "-//w3c//dtd html 4.0 transitional//en">
<html>
<head>
    
  <meta http-equiv="Content-Type"
 content="text/html; charset=iso-8859-1">
    
  <meta name="GENERATOR"
 content="Mozilla/4.75 [en] (X11; U; SunOS 5.7 sun4u) [Netscape]">
  <title>Example: Main Loops</title>
</head>
  <body style="font-family: Helvetica;" text="#000000" bgcolor="#ffffff"
 link="#3333ff" vlink="#993399" alink="#ff0000">
  
<center> 
<h1> Galaxy Communicator Documentation:<br>
 <br>
 Main loop example</h1>
</center>
 
<table cellpadding="2" cellspacing="2" border="0" width="100%">
    <tbody>
      <tr>
        <td valign="middle" align="left" width="10%"><a
 href="../audio/description.html"><img
 src="../../../../docs/arrow_left.gif" alt="" width="30" height="30">
      </a></td>
        <td valign="middle" align="center">          <a
 href="../../../../LICENSE">License</a> / <a
 href="../../../../docs/manual/index.html">Documentation home</a> / <a
 href="../../../../docs/manual/index.html#Getting_help">Help and feedback</a> 
       </td>
        <td valign="middle" align="right" width="10%"><a
 href="../binary_data/description.html"><img
 src="../../../../docs/arrow_right.gif" alt="" width="30" height="30">
      </a></td>
      </tr>
      
  </tbody>  
</table>
   
<hr>In this example, we show how the Communicator main loop works, and how
to recreate Communicator server functionality in other main loops. 
<p>This example can be found in the distribution in <tt>contrib/MITRE/examples/simple_mainloop</tt>. 
</p>
<h3> Source files</h3>
 simple_mainloop.c: provides a crude main loop for illustration purposes,
which allows the user to set callbacks on file descriptors and on "timers"
(actually, loop iterations, but it serves the purpose). This file defines
the functions SM_AddTimerCallback, SM_RemoveTimerCallback, SM_AddFDCallback,
SM_RemoveFDCallback, and SM_Mainloop ("SM" stands for "simple mainloop"). 
<p>simple_mainloop_elr.c: uses this crude mainloop to run a Communicator-compliant
server. </p>
<p>mainloop_double.c: the standard double server from the <a
 href="../double/main.html">double</a> example, using simple_mainloop_elr.c. 
</p>
<p>basic_double.c: a double server with an explicit main loop (essentially
a copy of the one in the GalaxyCommunicator core library), to contrast with
the other servers in this example. </p>
<h3> Running the example</h3>
All configurations in this example can be accessed by invoking the process
monitor, as follows.<br>
  
<blockquote><tt><b>Unix</b><br>
   <br>
 % cd &lt;root_of_GC&gt;<br>
 % ./contrib/MITRE/tools/bin/process_monitor contrib/MITRE/examples/simple_mainloop/simple_mainloop.config<br>
   <br>
   <b>Windows</b><br>
   <br>
 C:\&gt; set GC_HOME=&lt;root_of_GC&gt;<br>
 C:\&gt; python %GC_HOME%\</tt><tt>contrib\MITRE\tools\src\process_monitor\process_monitor.py
%GC_HOME%\contrib\MITRE\examples\simple_mainloop\simple_mainloop.config</tt><br>
 </blockquote>
  In addition, on Unix, we generate the following scripts.<br>
<br>
 mainloop_double.csh: runs the mainloop_double server and the Hub, using
the double program file from the <a href="../double/main.html">double</a> 
example. 
<p>mainloop_audio.csh: runs the mainloop_testaudio_send and mainloop_testaudio_receive
servers and the Hub, using the audio program file from the <a
 href="../audio/main.html">audio</a> example. </p>
<p>basic_double.csh: runs the basic double server and the Hub, using the
double program file from the <a href="../double/main.html">double</a> example. 
</p>
<h3> Compilation</h3>
 On Unix, typing "make" in this directory will create the servers, MIT-style
Makefiles, and scripts.<br>
<br>
The C version of this server contains a MSVC workspace for Windows, which
is also included in the toplevel MSVC workspace for the Galaxy Communicator
distribution. 
<h3> Discussion</h3>
 See the documentation on <a
 href="../../../../docs/manual/reference/server_structure.html">server structure</a>
and <a href="../../../../docs/manual/advanced/special_mainloop.html">alternative 
main loops</a>. 
<p> </p>
<hr>
<center> 
<table cellpadding="2" cellspacing="2" border="0" width="100%">
    <tbody>
      <tr>
        <td valign="middle" align="left" width="10%"><a
 href="../audio/description.html"><img
 src="../../../../docs/arrow_left.gif" alt="" width="30" height="30">
      </a></td>
        <td valign="middle" align="center">          <a
 href="../../../../LICENSE">License</a> / <a
 href="../../../../docs/manual/index.html">Documentation home</a> / <a
 href="../../../../docs/manual/index.html#Getting_help">Help and feedback</a> 
       </td>
        <td valign="middle" align="right" width="10%"><a
 href="../binary_data/description.html"><img
 src="../../../../docs/arrow_right.gif" alt="" width="30" height="30">
      </a></td>
      </tr>
      
  </tbody>  
</table>
  Last updated August 8, 2002</center>
  
<p><br>
 </p>
<br>
</body>
</html>
